# CellularAutomaton_v2
**Кросс-платформенное приложение для визуализации двумерных клеточных автоматов с графическим интерфейсом**\
Программа позволяет выбрать конфигурацию и запустить симуляцию [клеточного автомата](https://ru.wikipedia.org/wiki/Клеточный_автомат) (К.А.). Написано с использованием библиотеки [SFML](https://www.sfml-dev.org/).\
Клеточный автомат определяется 5-ю переменными: Birth/Survive/CntGen/TypeCheck/Radius\
Birth - множество количества живых соседей, при которых мертвая клетка становится живой\
Survive - множество количества живых соседей, при которых живая клетка остается живой\
(во всех остальных случаях клетка мертва)\
CntGen - количество состояний у клетки\
TypeCheck - тип окрестности (M - окрестность Мура, N - окрестность фон Неймана)\
Radius - радиус окрестности (расстояние между центральной и самой левой клеткой окрестности)\
На выбор предоставляются следующие клеточные автоматы:\
(множества перечисляются через пробел, "n - m" означает ряд чисел с n по m включительно)
- Live: 3/2 3/2/M/1
- Maze: 3/1 - 5/2/M/1
- Caves: 5 - 8/4 - 8/2/M/1
- Day Night: 3 6 7 8/3 4 6 7 8/2/M/1
- Amoeba: 3 5 - 8/5 - 8/2/M/1
- Carpet: 2 3 4//2/M/1
- Modern Art: 3/1 2/60/M/10
- Bugs 5: 34 - 45/33 - 57/2/M/5
- Brian Brain: 2//3/M/1
- Star Wars: 2/3 4/4/M/1
- Faders: 2/2/25/M/1
### Элементы управления
Чтобы подтвердить изменения, введенные в текстовые поля, нажмите соответствующую кнопку Apply\
При вводе чисел в текстовые поля, разделяйте их пробелами\
Чтобы ввести диапазон в текстовое поле напишите "n - m", это будет аналогично диапазону чисел от n до m включительно
#### Базовые 
Кнопка **RUN** - запускает симуляцию\
Кнопка **STOP** - останавливает симуляцию\
Кнопка **ONE STEP** - переводит симуляцию в следующее поколение (1 итерация)\
Кнопка **GENERATE** - случайно заполняет таблицу. Шанс появления живой клетки настраивается\
Кнопка **GENERATE SQUARE** - заполняет центральный квадрат живыми клетками, все остальные клетки делает мёртвыми. Радиус квадрата настраивается\
Кнопка **CLEAN** - заполняет всё поле мёртвыми клетками.
#### Расширенные настройки
Ползунок **TPS** - количество итераций симуляции в секунду (ticks per second). От 30 до 100\
Ползунок **CNT GENERATION** - количество состояний у клетки. От 2 до 100\
Ползунок **CHANCE** - шанс появления живой клетки при генерации (GENERATE, GENERATE SQUARE) в процентах. От 0 до 100\
Ползунок **SIZE** - радиус квадрата, который генерируется с помощью GENERATE SQUARE. (Формула длины через радиус - 2 * R + 1)\
Ползунок **RADIUS** - радиус окрестности клетки. От 1 до 10\
Кнопка **NEIGHBOURS** - тип окрестности. На выбор окрестности Мура и Неймана\
Текстовое поле **Birth** - позволяет записать множество Birth\
Текстовое поле **Survive** - позволяет записать множество Survive\
Текстовое поле **RGB Background** - позволяет выбрать цвет фона таблицы в формате RGB
#### Приближение/Передвижение камеры
В приложении реализована механика камеры.\
Чтобы увеличить или уменьшить изображение, используйте колесико мыши. Или же на клавиатуре: M - увеличить, N - уменьшить. Камера будет увеличиваться или уменьшаться относительно курсора мыши\
Чтобы передвигать камеру, зажмите колесико мыши и передвигайте курсор. Или же на клавиатуре с помощью стрелок
#### Остальные
Кнопка **NEW RANDOM** - случайно сгенерировать множества Birth и Survive, запомнить их и задать ими КА\
Кнопка **SET RANDOM** - задать запомнеными Birth и Survive КА\
Кнопка **UPLOAD** - выгрузить данные таблицы в файл .txt, который будет находится в той же директории, что и исполняемый файл. Выходной файл - outN.txt, где N - номер выходного файла. В выходном файле: 0 - мертвая клетка, 1 - живая клетка, >1 - стареющая клетка, чем больше номер, тем она старее (Пока что не работает, но чтобы заработало, нужно распаковать архив, то есть нажать по файлу exe из релиза ПКМ -> 7-ZIP -> Распаковать. Появится файл, в котором будет файл Resources, файл с иконкой и exe - по нему нужно кликать, чтобы запустить приложение. Теперь UPLOAD будет работать.)\
Кнопка **OPEN** - открыть .txt файл. Программа будет пытаться открыть файл data.txt. Программа считывает файл в том же формате, что и выгружает\
Кнопка **CLOSE** - закрыть приложение (без каких-либо сохранений)

------
### Разное
Размер таблицы - 500 * 500\
Имя открываемого файла - data.txt\
Все параметры КА отображаются под текстовыми полями Birth Survive
### Приложение
Программа написана на C++14 (это причина, почему программа стала отдельным репозиторием, а не продолжением первой части) с использование библиотеки [SFML](https://www.sfml-dev.org/) (2.6.2)
в среде разработки VisualStudio2022.\
Это мой первый проект на C++. Так как с C++ я знаком практически только со стороны олимпиадного программирования, в коде могут присутсвовать очень странные решения, 
кривое использование ООП. Буду признателен если вы укажете на недочёты в реализации.\
Проект будет обновляться
# Версии
## V2.0
#### Нововведения:
- Python -> C++
- Добавлено приближение камеры
- Большее разнообразие клеточных автоматов (3->6)
- Добавлен регулятор скорости (5, 15, 30, 60 TPS)
- ~~Больший размер таблицы~~ Более высокая скорость симуляции (размер таблицы - 200×200)
- Изменена иконка.
## V2.1
#### Нововведения:
- Добавление многопоточности. Один дополнительный поток для графики (отрисовки всех спрайтов), другой для взаимодействия с пользователем (то есть в нём проверяется нажатие кнопок и рисование кистью) \
Вследствии этого стало возможным увеличить размер таблицы. Теперь она **500×500**, а также скорость симуляции практически не зависит от скорости отрисовки \
Но появились проблемы, которые пока не исправлены (я не знаю как их исправить, пока что), например - зум работает плохо: при резком увеличении таблица будет отрисовываться неправильно, но на следующем кадре уже будет всё норм. И другие мелкие
- Добавлены текстуры для кнопок и задний фон, чтобы программа лучше выглядела :)
- Добавлена кнопка 120 tps
#### Исправления:
- Название программы отображается корректно
- Живые клетки не вылезают за границы таблицы
## V2.2
#### Нововведения:
- Добавлена новая функция - теперь можно сгенерировать случайный клеточный автомат  (со случайными множеством чисел для рождения клетки и для выживания клетки) c помощью кнопки NEWRANDOM (также устанавливает этот К.А. в текущий). SETRANDOM устанавливает в текущий К.А. случайно сгенерированный (не генерирует новый К.А.). Также справа посередине экрана будет отображаться параметры текущего К.А.
- Добавлены ползунки, для скорости симуляции (TPS) и для шанса появления клетки при генерации (GENERATE и GENERATESQUARE). Старые кнопки для регуляции скорости убраны
- Добавлена новая функция - теперь можно переключать тип проверки на соседство. TYPENEIGHBOURS:8 - соседями являюся клетки по стороне и по диагонали. TYPENEIGHBOURS:4 - соседями являются клетки по стороне
- Теперь поверхность симуляции не ограниченный квадрат, а тор (т.е. клетка (499, 499) соседняя с (0, 0)
#### Другие изменения:
- Значительно улучшена производительность. Переделана отрисовка таблицы. Из-за этого **зум был убран**
- Добавлена 32-битная версия в релиз (не факт что действительно работает)
#### Мелкие исправления:
- Теперь при расфокусе кнопки не будут нажиматься. Также кнопки теперь не нажимаются, если провести по ним зажатой мышью
- Убран поток, взаимодействующий с пользователем. (Из-за него возникали проблемы - пока этот поток записывает изменения в таблицу, основной поток пересчитывает ее, из-за чего, в частности, кнопка Clean очищала только нижнюю часть экрана)
# V2.3
#### Нововведения:
- Добавлены поколения! Теперь у клетки есть новое состояние - старение. Если живая клетка не имеет нужного числа соседей, то она начинает стареть и через определённое число итераций умирает. Стареющая клетка считается живым соседом. Напомню, что кисть рисует только живую клетку (а не стареющую)
- Добавлена возможность вручную указать конфигурацию Birth Survive. Числа вводятся в соответствующие поля через пробел. Для применения введённой конфигурации нажмите Apply
- Добавлены новые типы на проверку соседей. За это отвечает кнопка Type Neighbours. Возможные значения - 4, 8, 12, 24. В прошлых версиях это значение было равно 8 или 4. 4 - это окрестность фон Неймана, 8 - окрестность Мура, 12 и 24 по аналогии означают число проверяемых соседей
- Зум возвращён! Теперь можно приближать вращая колесо мыши и скроллить, зажав колесо мыши. Также можно управлять камерой с клавиатуры - стрелки двигают камеру,  M/N соответственно приближает и отдаляет камеру. R - вернуть камеру в начальное положение
#### Изменения:
- Размер поля 501->1000
- Большая часть кода изменена и структурирована. Да, все ещё много глобальных переменных, но их стало намного меньше. Добавлено несколько классов ради удобства, удалён класс CellularAutomaton, переименован класс defenition -> Global
## V2.3.1
См V2.3.2
## V2.3.2
#### Нововведения
- Добавлен ползунок, с помощью которого можно регулировать размер центрального квадрата генерации (size - это радиус квадрата, то есть size 2 - это квадрат 5 * 5)
- Добавлена возможность выбора цветов фона и клетки (теперь у клетки только один цвет, см. Изменения)
- Добавлен новый параметр у клеточного аппарата - радиус окрестности. Его можно изменять с помощью ползунка. Старая кнопка TYPENEIGHBOURS теперь отвечает за тип окрестности - Мура (квадратная) и Неймана (ромбовидная)
- Добавлены новые клеточные автоматы. Среди них - Modern Art, Bugs, Brian Brain, Star Wars, Faders
- Добавлена версия для linux! Пока что поддерживает архитектуру x86-64, остальные не факт
#### Изменения 
- Изменено расположение кнопок в меню
- Изменена цветовая палитра клетки. Теперь у клетки лишь один цвет, но чем она старее, тем прозрачнее ее цвет
- Теперь параметр Cnt Generations обозначает общее количество состояний клетки, включая и мертвую и живую. У автомата жизнь Cnt Gener.  = 2. (В предыдущей версии учитывались все состояния, кроме мертвого)
- Теперь выводится вся информация о текущем клеточном автомате (все параметры)
- Теперь поля ввода Birth и Survive поддерживают ввод через диапазон допустимых значений. Например, если нужно указать, что клетка выживает при 33, 34, ..... 57 соседях, достаточно написать "33 - 57" (через пробел, без кавычек)
- Убраны Custom1 и Custom2
- Размер поля 1000->500, т.к. из-за некоторых нововведений (расширенный радиус, где каждая клетка проверяет около сотни соседей; альфа канал в цветах клеток) производительность снизилась
